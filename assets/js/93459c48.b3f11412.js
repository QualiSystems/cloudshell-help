"use strict";(self.webpackChunkcloudshell_help=self.webpackChunkcloudshell_help||[]).push([[79772],{9608:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>a,toc:()=>c});var i=t(17624),s=t(4552);const l={sidebar_position:1},o="Getting Started with Packaging API",a={id:"api-guide/packaging-api/get-start-with-pkg-api",title:"Getting Started with Packaging API",description:"Prerequisites",source:"@site/versioned_docs/version-2023.3/api-guide/packaging-api/get-start-with-pkg-api.md",sourceDirName:"api-guide/packaging-api",slug:"/api-guide/packaging-api/get-start-with-pkg-api",permalink:"/cloudshell-help/api-guide/packaging-api/get-start-with-pkg-api",draft:!1,unlisted:!1,editUrl:"https://github.com/QualiSystems/cloudshell-help/tree/main/versioned_docs/version-2023.3/api-guide/packaging-api/get-start-with-pkg-api.md",tags:[],version:"2023.3",lastUpdatedAt:1715813545e3,sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Packaging API",permalink:"/cloudshell-help/api-guide/packaging-api/"},next:{title:"Creating and Loading a Blueprint Package",permalink:"/cloudshell-help/api-guide/packaging-api/creat-and-load-blueprint-pkg/"}},r={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"Code Sample",id:"code-sample",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.M)(),...e.components},{Details:l}=n;return l||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"getting-started-with-packaging-api",children:"Getting Started with Packaging API"}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Python 3 (version 3.6 and above)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://dotnet.microsoft.com/en-us/download/dotnet-framework",children:".NET\xa0Framework 4.7"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://dotnet.microsoft.com/en-us/download/dotnet/5.0",children:".NET\xa05 Runtime"})," (on Windows Execution Servers that will be used for packaging API operations)"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"quali_utils.3.3.0.tar.gz: Version 3.3.0 is cross-platform (supported on Windows/Linux) and requires both .NET Framework 4.7 and .NET 5 Runtime to work (Alternatively, you can use version 3.2, which is not cross-platform, and does require .NET 5 Runtime."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"pip install <path_to_quali_utils_package>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Note: quali_utils.3.3.0 is supported by CloudShell 2022.1 and above. For previous versions, see ",(0,i.jsx)(n.a,{href:"https://help.quali.com/help%20versions/All%20Versions%20Help/Content/Versions.htm",children:"earlier versions"})," of CloudShell Help."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Make sure you have a compatible Python version installed on your machine."}),"\n",(0,i.jsxs)(n.li,{children:["To download the Python Package Editor that applies to your installed CloudShell version, visit the ",(0,i.jsx)(n.a,{href:"https://support.quali.com/hc/en-us/articles/360038314833",children:"Python Package Editor Download Page"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Do one of the following:"}),"\n"]}),"\n",(0,i.jsxs)(l,{children:[(0,i.jsx)("summary",{children:"Windows installation:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Run the pip tool to install the package."}),"\n"]})]}),"\n",(0,i.jsxs)(l,{children:[(0,i.jsx)("summary",{children:"Linux installation:"}),(0,i.jsx)(n.p,{children:"You can install Packaging API on Linux environments that have .NET 5 Runtime."}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)("span",{style:{color:"blue"},children:"Installation instructions for various Linux environments:"})})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ubuntu: ",(0,i.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-ubuntu",children:"Microsoft-us/dotnet/core/install/linux-ubuntu"})]}),"\n",(0,i.jsxs)(n.li,{children:["Alpine: ",(0,i.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-alpine",children:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-alpine"})]}),"\n",(0,i.jsxs)(n.li,{children:["Centos: ",(0,i.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-centos",children:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-centos"})]}),"\n",(0,i.jsxs)(n.li,{children:["Debian: ",(0,i.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-debian",children:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-debian"})]}),"\n",(0,i.jsxs)(n.li,{children:["Fedora: ",(0,i.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-fedora",children:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-fedora"})]}),"\n",(0,i.jsxs)(n.li,{children:["OpenSUSE: ",(0,i.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-opensuse",children:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-opensuse"})]}),"\n",(0,i.jsxs)(n.li,{children:["Red Hat Enterprise Linux: ",(0,i.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-rhel",children:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-rhel"})]}),"\n",(0,i.jsxs)(n.li,{children:["SLES: ",(0,i.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-sles",children:"https://docs.microsoft.com/en-us/dotnet/core/install/linux-sles"})]}),"\n"]}),(0,i.jsx)(n.p,{children:"Please note that the required version in \u201cdotnet-runtime-5.0\u201d is not as listed in the documentation - \u201cdotnet-runtime-6.0\u201d"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)("span",{style:{color:"blue"},children:"Example: Installing Packaging API on Ubuntu 18.04:"})})}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Set up Python 3, pip 3:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"sudo apt update\nsudo apt install python3\nsudo apt-get -y install python3-pip\npip3 install --upgrade pip\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Set up .NET 5 support:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"wget https://packages.microsoft.com/config/ubuntu/18.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb\nsudo dpkg -i packages-microsoft-prod.deb\n\t\t\t\t\t\t\t\t\nrm packages-microsoft-prod.deb\nsudo apt-get update\nsudo apt-get install -y apt-transport-https\nsudo apt-get update\nsudo apt-get install -y dotnet-runtime-5.0\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Install quali_utils 3.3.0:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Copy file quali_utils-3.3.0.tar.gz to /tmp folder."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Run command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"pip3 install /tmp/quali_utils-3.3.0.tar.gz\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Validate the installation:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Copy files package_editor_linux.py and TestPackage.zip to /tmp"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Run python command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"python3 package_editor_linux.py\n"})}),"\n",(0,i.jsx)(n.p,{children:"Output:"}),"\n",(0,i.jsx)(n.p,{children:"![](../../Images/API/Packaging API/LinuxInstallOutput.png)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Run the ",(0,i.jsx)(n.code,{children:"dir"})," command and see if CreatedPackage2.zip was created."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Make sure the package TestPackage.zip now includes 2 new global inputs in topology."}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,i.jsx)(n.h2,{id:"code-sample",children:"Code Sample"}),"\n",(0,i.jsx)(n.p,{children:"The following code sample provides an example of how to create new blueprints using the API. This example demonstrates how to perform the following flow:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(96408).c+"",width:"428",height:"341"})}),"\n",(0,i.jsx)(n.p,{children:"This example uses the \u201crequests\u201d python module."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from quali_utils.quali_packaging import PackageEditor\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import requests\n\n#Create a new package in the local file system\n\np = PackageEditor()\n\np.create("c:\\\\myfolder\\\\mypack.zip")\n\n\n\n\n#Load the package and prepare for edit\n\np.load("c:\\\\myfolder\\\\mypack.zip")\n\n#Edit the package: f.e add new family\n\np.add_family("Ball", "", ["Game", "3D Shape", "MoreStuff"], False, False, False, False, True)\n\n\n#Import the package into CloudShell\n\n# 1 \u2013 authenticate\n\nr = requests.put(\'http://localhost:9000/Api/Auth/Login\', {"username": "admin", "password": "admin", "domain": "Global"})\n\nauthcode = "Basic " + response._content[1:-1]\n\n\n#2 \u2013 Open the package before import\n\nfileobj = open("c:\\\\p.zip", \'rb\')\n\n#3 \u2013 Send to CloudShell by calling Import Package REST API\n\nr = requests.post(\'http://localhost:9000/API/Package/ImportPackage\',\n\n                 headers={"Authorization": authcode},\n\n                 files={"file": fileobj})\nprint r._content\n\nprint r.ok\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.M)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},96408:(e,n,t)=>{t.d(n,{c:()=>i});const i=t.p+"assets/images/code-sample-d743d525ddf47d3a31189cf26f7a986d.png"},4552:(e,n,t)=>{t.d(n,{I:()=>a,M:()=>o});var i=t(11504);const s={},l=i.createContext(s);function o(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);
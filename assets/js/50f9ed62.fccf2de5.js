"use strict";(self.webpackChunkcloudshell_help=self.webpackChunkcloudshell_help||[]).push([["82113"],{39275:function(t,e,n){n.r(e),n.d(e,{frontMatter:()=>a,toc:()=>h,default:()=>c,metadata:()=>l,assets:()=>s,contentTitle:()=>i});var l=JSON.parse('{"id":"install-configure/ha-installation/install-win-network-load-balance/work-with-arr-cluster","title":"Working with the ARR Cluster Virtual Front","description":"After configuring the ARR load balancing cluster, you can use the cluster IP or name (for example, 192.162.63.110 or CloudShellPortal-LB) to browse the portal.","source":"@site/versioned_docs/version-2024.1/install-configure/ha-installation/install-win-network-load-balance/work-with-arr-cluster.md","sourceDirName":"install-configure/ha-installation/install-win-network-load-balance","slug":"/install-configure/ha-installation/install-win-network-load-balance/work-with-arr-cluster","permalink":"/2024.1/install-configure/ha-installation/install-win-network-load-balance/work-with-arr-cluster","draft":false,"unlisted":false,"editUrl":"https://github.com/QualiSystems/cloudshell-help/tree/main/versioned_docs/version-2024.1/install-configure/ha-installation/install-win-network-load-balance/work-with-arr-cluster.md","tags":[],"version":"2024.1","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Adding Another Host to the Network Load Balancing Cluster","permalink":"/2024.1/install-configure/ha-installation/install-win-network-load-balance/add-another-host-to-net-lb"},"next":{"title":"Monitoring the Cluster Environment","permalink":"/2024.1/install-configure/ha-installation/install-win-network-load-balance/monitor-cluster-env"}}'),r=n(74848),o=n(84429);let a={sidebar_position:3},i="Working with the ARR Cluster Virtual Front",s={},h=[];function d(t){let e={admonition:"admonition",code:"code",h1:"h1",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...t.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"working-with-the-arr-cluster-virtual-front",children:"Working with the ARR Cluster Virtual Front"})}),"\n",(0,r.jsx)(e.p,{children:"After configuring the ARR load balancing cluster, you can use the cluster IP or name (for example, 192.162.63.110 or CloudShellPortal-LB) to browse the portal."}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"To configure the portal virtual front with Quali Server:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Connect to the Quali database using Microsoft SQL Server Management Studio. (if you are using SQL AlwaysOn \u2013 connect to the AlwaysOn Listener)."}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Copy the SQL statements below and paste them after changing these parameters:"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"SQL statement"}),(0,r.jsx)(e.th,{children:"Parameter details"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"<<Quali Database>>"})}),(0,r.jsx)(e.td,{children:"Select the Quali Database your system uses"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"<<CloudShell Portal\xa0 Ip or Name>>"})}),(0,r.jsx)(e.td,{children:"Select the CloudShell Portal Virtual front IP or DNS name"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"<<CloudShell Portal Port>>"})}),(0,r.jsx)(e.td,{children:"Select the CloudShell Portal Virtual front port"})]})]})]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Run the following SQL statement. This SQL statement ensures that Quali server is aware of the portal cluster and does not use the portal cluster nodes for communication (for example, links that are in emails sent from Quali server should redirect you to the CloudShell Portal cluster and not to one of the individual nodes)."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"USE <<Quali Database>>\nGO\n\nIF (select count(*) from PortalInfo) > 0\nBEGIN\n\n/*Choose your CloudShell Portal Virtual front Ip or name*/\nDECLARE @ip NVARCHAR(15) = <<CloudShell Portal  Ip or Name>>\n\n/*Choose your CloudShell Portal Virtual front portal port*/\nDECLARE @port INT = <<CloudShell Portal Port>>\n\nUPDATE [dbo].[PortalInfo]\n   SET [MachineName] = @ip\n      ,[Port] = @port\n/*If http is in use, change the http to https*/\n      ,[PortalUri] = 'http://' + @ip + ':' + CONVERT(varchar(10),@port) + '/'\n      ,[ModificationDate] = GETDATE()\nWHERE Id = (select max(Id) from [dbo].[PortalInfo])\nEND\nELSE\n PRINT 'No registered CloudShell Portal in the system, please register the Portal and run this statement again...'\nGO\n"})}),"\n",(0,r.jsx)(e.admonition,{type:"note",children:(0,r.jsx)(e.p,{children:"You do not need to restart the server."})}),"\n"]}),"\n"]})]})}function c(t={}){let{wrapper:e}={...(0,o.R)(),...t.components};return e?(0,r.jsx)(e,{...t,children:(0,r.jsx)(d,{...t})}):d(t)}},84429:function(t,e,n){n.d(e,{R:()=>a,x:()=>i});var l=n(96540);let r={},o=l.createContext(r);function a(t){let e=l.useContext(o);return l.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function i(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(r):t.components||r:a(t.components),l.createElement(o.Provider,{value:e},t.children)}}}]);
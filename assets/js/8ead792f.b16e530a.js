"use strict";(self.webpackChunkcloudshell_help=self.webpackChunkcloudshell_help||[]).push([[76328],{50020:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>c});var o=t(17624),s=t(4552);const l={sidebar_position:3},i="Set the MongoDB Connection Strings",a={id:"install-configure/cloudshell-suite/complete-install/install-cloudshell/select-database-type/set-the-mongodb-connection-string",title:"Set the MongoDB Connection Strings",description:"1. In the Additional Services window, set the MongoDB connection strings.",source:"@site/docs/install-configure/cloudshell-suite/complete-install/install-cloudshell/select-database-type/set-the-mongodb-connection-string.md",sourceDirName:"install-configure/cloudshell-suite/complete-install/install-cloudshell/select-database-type",slug:"/install-configure/cloudshell-suite/complete-install/install-cloudshell/select-database-type/set-the-mongodb-connection-string",permalink:"/cloudshell-help/next/install-configure/cloudshell-suite/complete-install/install-cloudshell/select-database-type/set-the-mongodb-connection-string",draft:!1,unlisted:!1,editUrl:"https://github.com/QualiSystems/cloudshell-help/tree/main/docs/install-configure/cloudshell-suite/complete-install/install-cloudshell/select-database-type/set-the-mongodb-connection-string.md",tags:[],version:"current",lastUpdatedAt:1715723127e3,sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"How to Upgrade MongoDB From 4.2 to 6.0",permalink:"/cloudshell-help/next/install-configure/cloudshell-suite/complete-install/install-cloudshell/select-database-type/how-to-upgrade-4.2-6"},next:{title:"Check for CloudShell Required Components",permalink:"/cloudshell-help/next/install-configure/cloudshell-suite/complete-install/install-cloudshell/check-cloudshell-required-components"}},r={},c=[{value:"Creating a dbOwner user on the MongoDB databases",id:"creating-a-dbowner-user-on-the-mongodb-databases",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.M)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"set-the-mongodb-connection-strings",children:"Set the MongoDB Connection Strings"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"In the Additional Services window, set the MongoDB connection strings."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:t(67428).c+"",width:"536",height:"523"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["If you selected to use your organization\u2019s Mongo DB (",(0,o.jsx)(n.strong,{children:"Mongo DB Server or cluster"})," option in the CloudShell Setup wizard) and require authentication, perform the steps in the ",(0,o.jsx)(n.a,{href:"#creating-a-dbowner-user-on-the-mongodb-databases",children:"Creating a dbOwner user on the MongoDB databases"})," section below."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Specify the locations for the three MongoDB databases:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Reservations Database"}),"\n",(0,o.jsx)(n.li,{children:"Events Database"}),"\n",(0,o.jsx)(n.li,{children:"Sandbox Service Database"}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"In a Kubernetes deployment, the Sandbox Service database is not created even though it was configured in the Quali Server configuration wizard."})}),"\n",(0,o.jsx)(n.p,{children:"Use the default connection strings provided by the Quali Server configuration wizard if you installed MongoDB on the Quali Server machine. If you\u2019re using your organization\u2019s Mongo DB, use the following syntax:"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Syntax"}),":"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"mongodb://[username:password@]host1[:port1][,...hostN[:portN]][/[defaultauthdb][?options]]"})}),"\n",(0,o.jsx)(n.p,{children:"Where:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"host1[:port1][,...hostN[:portN]"})," allows specifying multiple DBs for cluster configurations"]}),"\n",(0,o.jsxs)(n.li,{children:["[",(0,o.jsx)(n.code,{children:"defaultauthdb]"})," is required if the Mongo DB uses authentication"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example - connection string for Quali Mongo DB database:"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"mongodb://QualiAdmin:QualiAdminPassword@localhost:27017/Quali?authSource=admin"})}),"\n",(0,o.jsxs)(n.p,{children:["CloudShell supports these MongoDB connection formats \u2013 ",(0,o.jsx)(n.strong,{children:"Standard Connection String Format"})," and ",(0,o.jsx)(n.strong,{children:"DNS Seedlist Connection Format"}),". For details, see this official MongoDB docs article: ",(0,o.jsx)(n.a,{href:"https://docs.mongodb.com/manual/reference/connection-string/",children:"https://docs.mongodb.com/manual/reference/connection-string/"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click Next and proceed to ",(0,o.jsx)(n.a,{href:"/cloudshell-help/next/install-configure/cloudshell-suite/complete-install/install-cloudshell/select-install-location",children:"Select Where to Install CloudShell"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"creating-a-dbowner-user-on-the-mongodb-databases",children:"Creating a dbOwner user on the MongoDB databases"}),"\n",(0,o.jsx)(n.p,{children:"When using an external Mongo DB that requires authentication, you must create a user with \u201cdbOwner\u201d rights on the Mongo DB databases. Note that you don\u2019t need to create the databases beforehand as Quali will do that for you."}),"\n",(0,o.jsx)(n.p,{children:"To create the dbOwner user on the Mongo DB databases:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Connect to the Mongo DB server and open a Mongo shell instance."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Run the following:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'use admin\ndb.createUser({\n    user: "QualiAdmin",\n    pwd: "QualiAdminPassword",\n    roles: [\n    { role: "dbOwner", db: "Quali" },\n    { role: "dbOwner", db: "QualiLog" },\n    { role: "dbOwner", db: "QualiSandboxService" },\n    ]\n})\n'})}),"\n",(0,o.jsx)(n.p,{children:"For additional information, see these official MongoDB docs articles:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://docs.mongodb.com/manual/tutorial/enable-authentication/",children:"https://docs.mongodb.com/manual/tutorial/enable-authentication/"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://docs.mongodb.com/manual/tutorial/create-users/",children:"https://docs.mongodb.com/manual/tutorial/create-users/"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Click Next."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"If prompted, click Next to perform a database upgrade."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:t(18172).c+"",width:"536",height:"523"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click Next and proceed to ",(0,o.jsx)(n.a,{href:"/cloudshell-help/next/install-configure/cloudshell-suite/complete-install/install-cloudshell/select-install-location",children:"Select Where to Install CloudShell"}),"."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.M)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},67428:(e,n,t)=>{t.d(n,{c:()=>o});const o=t.p+"assets/images/ConfiguringMongoDBConnectionStrings-fc65235df8c80ccd2ae30688dc4560a7.png"},18172:(e,n,t)=>{t.d(n,{c:()=>o});const o=t.p+"assets/images/DatabaseUpgrade-5153c12532f9fa87322100717e1b489c.png"},4552:(e,n,t)=>{t.d(n,{I:()=>a,M:()=>i});var o=t(11504);const s={},l=o.createContext(s);function i(e){const n=o.useContext(l);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(l.Provider,{value:n},e.children)}}}]);
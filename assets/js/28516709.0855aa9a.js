"use strict";(self.webpackChunkcloudshell_help=self.webpackChunkcloudshell_help||[]).push([[97855],{9386:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/traceIdShowLogMessages2-b772520ef4f93e87c521876c9cc41e0e.png"},11447:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"install-configure/cloudshell-suite/central-logging/track-threads","title":"How to Track Event Threads Using Trace ID or Reservation ID","description":"This tracking capability is provided as part of Central Logging Configuration.","source":"@site/versioned_docs/version-2024.1/install-configure/cloudshell-suite/central-logging/track-threads.md","sourceDirName":"install-configure/cloudshell-suite/central-logging","slug":"/install-configure/cloudshell-suite/central-logging/track-threads","permalink":"/install-configure/cloudshell-suite/central-logging/track-threads","draft":false,"unlisted":false,"editUrl":"https://github.com/QualiSystems/cloudshell-help/tree/main/versioned_docs/version-2024.1/install-configure/cloudshell-suite/central-logging/track-threads.md","tags":[],"version":"2024.1","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Configure Elastic Stack for Central Logging","permalink":"/install-configure/cloudshell-suite/central-logging/modify-cloudshell"},"next":{"title":"Back Up and Restore CloudShell","permalink":"/install-configure/cloudshell-suite/backup-restore"}}');var t=n(74848),i=n(28453);const a={sidebar_position:3},o="How to Track Event Threads Using Trace ID or Reservation ID",l={},c=[{value:"Main thread IDs",id:"main-thread-ids",level:2},{value:"Log parameters",id:"log-parameters",level:2},{value:"Tracking an events thread",id:"tracking-an-events-thread",level:2}];function d(e){const s={admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Details:r}=s;return r||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"how-to-track-event-threads-using-trace-id-or-reservation-id",children:"How to Track Event Threads Using Trace ID or Reservation ID"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.em,{children:"This tracking capability is provided as part of Central Logging Configuration."})}),"\n",(0,t.jsx)(s.p,{children:"CloudShell logs traditionally reside in different locations. As a result, the same CloudShell user flow (like a sandbox or resource execution) can be recorded in different logs, each addressing a different aspect of the user flow and complicating matters for the user reading the files. For example, if Job Scheduling Service executes a job suite, it will need a sandbox, so it calls sandbox service, which calls Quali Server, which in turn calls Execution Server. This entire thread, with requests and responses will have a common thread ID, which can be used to follow user flows through the system."}),"\n",(0,t.jsx)(s.h2,{id:"main-thread-ids",children:"Main thread IDs"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"reservationid"})," for sandbox deployments"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"traceId"})," for the New Job Scheduling"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"For example:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:n(83695).A+"",width:"1225",height:"227"})}),"\n",(0,t.jsx)(s.admonition,{title:"Limitation",type:"warning",children:(0,t.jsx)(s.p,{children:'Some logs are "internal\u201d. In other words, they don\u2019t originate from another service and therefore will either have a unique trace id, maybe even "null". This simply means that these logs are not part of a sequence of calls between different services.'})}),"\n",(0,t.jsx)(s.h2,{id:"log-parameters",children:"Log parameters"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:'{ "timestamp": "2021-09-01T13:27:49.529566", "app": "JSS", "traceId": "f96f3dce7c59f549aba7d55b21b4daa7", "threadId": "10", "level": "DEBUG", "machineName": "job-scheduling-service-556cc88484-5gf4t", "category": "Quali.CloudShell.Job.Scheduling.Api.TestExecutionManagement.SandboxExecutionHandler", "message": "Attempting to update test result for test execution id: c3892e15-6b2f-473a-a60f-d2f033d17fbb" }\n'})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Timestamp"}),": when the log was taken"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"App"}),": what component of our architecture took the log"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Traceid"}),": (applies to New Job Scheduling flows) UUID that is generated when a process calls another process. For example when JSS orders a new sandbox, it passes the request to sandbox service which passes the request to Quali Server. This request will share a traceid."]}),"\n",(0,t.jsx)(s.p,{children:"Trace ID allows you to follow an action that involved several components such as launching a job and creating a reservation it is useful to see how that request was handled in different components"}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Reservationid"}),": (Applies to sandbox lifecycle flows) UUID of the sandbox"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Threadid"}),": internal thread in the component. Useful for debugging. Represents the internal thread of the process where the logging occurred"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Level"}),": log level"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Machinename"}),": name of host or container that took the log"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Category"}),": log category. This is a developer tool used internally to describe what general area of code logged the message."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Message"}),": message of the log. For example:",(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.img,{src:n(22234).A+"",width:"1649",height:"258"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"tracking-an-events-thread",children:"Tracking an events thread"}),"\n",(0,t.jsx)(s.p,{children:"For illustration purposes, the following procedure assumes you're using Elastic Stack to get a log thread related to a trace id, but you can use your preferred log management tool."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"To track an events thread:"})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["In Elastic Stack, open the ",(0,t.jsx)(s.strong,{children:"Discover"})," or ",(0,t.jsx)(s.strong,{children:"Logs"})," page."]}),"\n",(0,t.jsxs)(s.li,{children:["Add the ",(0,t.jsx)(s.strong,{children:"traceId"})," column to the table.","\n",(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(s.p,{children:"More..."})}),(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:n(62740).A+"",width:"1248",height:"774"})})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["To display log messages relating to a specific trace id, hover over the desired ",(0,t.jsx)(s.strong,{children:"traceId"}),' and click the "+" button.',"\n",(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(s.p,{children:"More..."})}),(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:n(39682).A+"",width:"1596",height:"803"})})]}),"\n","Messages for that trace id are displayed.","\n",(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(s.p,{children:"More..."})}),(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:n(9386).A+"",width:"1561",height:"998"})})]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},22234:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/centalLoggingMessageFilter-a07b661027024bcdd8be34f53676a24a.png"},28453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>o});var r=n(96540);const t={},i=r.createContext(t);function a(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(i.Provider,{value:s},e.children)}},39682:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/TraceIdShowLogMessages-c51addaec50bcb7c9ac6cb975ed313da.png"},62740:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/TraceIdAdd-e3f1757ec21c22d2314ad72e207c8ae5.png"},83695:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/centalLoggingTraceidFilter-e218254fa9ad20c440242db5c58d3ea7.png"}}]);
"use strict";(self.webpackChunkcloudshell_help=self.webpackChunkcloudshell_help||[]).push([[88256],{62948:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var s=i(17624),t=i(4552);const r={sidebar_position:9},l="QualiX Configuration for Version 5.0 and up",a={id:"install-configure/qualix/post-installation-config/qualix-config-for-5-and-up",title:"QualiX Configuration for Version 5.0 and up",description:"Qualix Docker configuration file",source:"@site/docs/install-configure/qualix/post-installation-config/qualix-config-for-5-and-up.md",sourceDirName:"install-configure/qualix/post-installation-config",slug:"/install-configure/qualix/post-installation-config/qualix-config-for-5-and-up",permalink:"/cloudshell-help/next/install-configure/qualix/post-installation-config/qualix-config-for-5-and-up",draft:!1,unlisted:!1,editUrl:"https://github.com/QualiSystems/cloudshell-help/tree/main/docs/install-configure/qualix/post-installation-config/qualix-config-for-5-and-up.md",tags:[],version:"current",lastUpdatedAt:1715729826e3,sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"Modify Number of CPUs and Allocated Memory",permalink:"/cloudshell-help/next/install-configure/qualix/post-installation-config/modify-cpu-and-ram"},next:{title:"Prepare and Reserve Blueprint",permalink:"/cloudshell-help/next/install-configure/qualix/prepare-and-reserve-blueprint"}},o={},c=[{value:"Qualix Docker configuration file",id:"qualix-docker-configuration-file",level:2},{value:"Options",id:"options",level:2},{value:"QualiX configuration",id:"qualix-configuration",level:3},{value:"JKS Keystore options, SSL settings for Guacamole Tomcat",id:"jks-keystore-options-ssl-settings-for-guacamole-tomcat",level:3},{value:"Nginx proxy service options",id:"nginx-proxy-service-options",level:3},{value:"SSO SAML options",id:"sso-saml-options",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"qualix-configuration-for-version-50-and-up",children:"QualiX Configuration for Version 5.0 and up"}),"\n",(0,s.jsx)(n.h2,{id:"qualix-docker-configuration-file",children:"Qualix Docker configuration file"}),"\n",(0,s.jsx)(n.p,{children:"This is a Docker environment file in key=value format."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"To change configuration:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Edit the QualiX Docker configuration file at ",(0,s.jsx)(n.code,{children:"/opt/qualix/.qualix.env"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Update the configuration file with the suitable ",(0,s.jsx)(n.a,{href:"#options",children:"Options"}),". Make sure each option (key-value pair) is on a separate line in the file."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Restart QualiX:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"qualix_stop\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"qualix_start\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This will override the default options in ",(0,s.jsx)(n.code,{children:"/opt/qualix/.env"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,s.jsx)(n.p,{children:"In this section:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#qualix-configuration",children:"QualiX configuration"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#jks-keystore-options-ssl-settings-for-guacamole-tomcat",children:"JKS Keystore options, SSL settings for Guacamole Tomcat"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#nginx-proxy-service-options",children:"Nginx proxy service options"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#sso-saml-options",children:"SSO SAML options"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"qualix-configuration",children:"QualiX configuration"}),"\n",(0,s.jsx)(n.p,{children:"QualiX configuration options that you can uncomment or add."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Activate QualiX debug mode"}),". Default is ",(0,s.jsx)(n.strong,{children:"false"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"QUALIX_DEBUG=true\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Set link expiration time (in seconds)"}),". Default is ",(0,s.jsx)(n.strong,{children:"60"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"QUALIX_LINK_TIMEOUT=60\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Disable link expiration"}),". Default is ",(0,s.jsx)(n.strong,{children:"false"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"QUALIX_DISABLE_LINK_VALIDATION=true\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Enable multiple connection retries during session initialization"}),". This option sets the timeout value. Default is ",(0,s.jsx)(n.strong,{children:"0"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"QUALIX_CONNECTION_TIMEOUT=60\n"})}),"\n",(0,s.jsx)(n.p,{children:"If the session host is unreachable or in startup phase, QualiX will try to reconnect until it succeeds. If the timeout value is reached, an error is raised."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"When QualiX services are behind a proxy service, this header is used to retrieve client real ip address"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"This option is needed if the Nginx proxy service is enabled."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"QUALIX_REMOTE_ADDR_HEADER=X-Forwarded-For\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Disable public key access"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"QUALIX_SHARE_PUBLIC_KEY=false\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Allow authentication from specific addresses/networks only"}),". Default is ",(0,s.jsx)(n.strong,{children:"0.0.0.0/0"})," (allow from any)."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"QUALIX_ALLOW_AUTH_FROM=<comma-separated list of addresses/networks>\n"})}),"\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"QUALIX_ALLOW_AUTH_FROM=192.168.10.0/24, 192.168.20.33\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"jks-keystore-options-ssl-settings-for-guacamole-tomcat",children:"JKS Keystore options, SSL settings for Guacamole Tomcat"}),"\n",(0,s.jsx)(n.p,{children:"This section explains how to set a trusted certificate for the Guacamole service."}),"\n",(0,s.jsxs)(n.p,{children:["These options apply when the Guacamole service is used as a standalone service and the Nginx service is disabled. In other case, see ",(0,s.jsx)(n.a,{href:"#nginx-proxy-service-options",children:"Nginx proxy service options"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"The JKS Keystore file contains SSL certificates for the Guacamole Tomcat service."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Example: How to convert PEM ",(0,s.jsx)(n.code,{children:"/certs/qualix.pem"})," format to jks ",(0,s.jsx)(n.code,{children:"/certs/qualix.jks"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'openssl pkcs12 -export -in /certs/qualix.pem -inkey /certs/qualix.pem -out /certs/qualix.p12 -password pass:"${password}"\nkeytool -importkeystore -srckeystore /certs/qualix.p12 -srcstoretype PKCS12 \\\n -destkeystore /certs/qualix.jks -deststoretype JKS -srcstorepass "${password}" \\\n -deststorepass "${password}"\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Set the path to JKS Keystore file on docker host"}),". This will mount the file into the container and allow it to be used by Guacamole Tomcat."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"JKS_KEYSTORE_FILE_EXT=/certs/qualix.jks\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Set the password to JKS Keystore"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"JKS_KEYSTORE_PASS=123123\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"nginx-proxy-service-options",children:"Nginx proxy service options"}),"\n",(0,s.jsx)(n.p,{children:"This section explains how to set a trusted certificate for the Nginx service. Perform this procedure if you need to use a trusted certificate but also if QualiX 5.0 is running without guacamole."}),"\n",(0,s.jsx)(n.p,{children:"These options need the Nginx proxy service to be enabled."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Path to SSL certificate file on the docker host"}),". If option is set the file will be mounted into the container and used by the Nginx service."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"NGINX_SSL_CERT_EXT=/tmp/qualix.crt\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Path to SSL key file on the docker host"}),". If option is set the file will be mounted into the container and used by nginx."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"NGINX_SSL_KEY_EXT=/tmp/qualix.key\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"sso-saml-options",children:"SSO SAML options"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"The URI of the XML metadata file"}),". Contains all the information the SAML extension needs to authenticate with the IdP."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"SAML_IDP_METADATA_URL=https://dev-629237.okta.com/app/exkrkrh6zcJUewd321/sso/saml/metadata\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"The entity ID of the Guacamole SAML client"}),", which is usually the URL of the Guacamole server."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"SAML_ENTITY_ID=https://qualix.francecentral.cloudapp.azure.com\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"The URL to be used by the IdP once authentication has succeeded to return to the Guacamole web application and provide the authentication details to the SAML extension"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"SAML_CALLBACK_URL=https://qualix.francecentral.cloudapp.azure.com/remote/api/ext/quali-auth/connect\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"This option needs to be set when SAML is activated"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"EXTENSION_PRIORITY=saml\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Require strict security checks during SAML logins"}),". This will ensure that valid certificates are present for all interactions with SAML servers and will fail SAML authentication if security restrictions are violated."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"SAML_STRICT=false\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},4552:(e,n,i)=>{i.d(n,{I:()=>a,M:()=>l});var s=i(11504);const t={},r=s.createContext(t);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);
<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-2023.3 docs-doc-page docs-doc-id-admin/cloudshell-execution-server-configurations/setting-up-execution-servers-to-run-commands" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Setting Up Execution Servers to Run Commands | CloudShell Help</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://help.quali.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://help.quali.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://help.quali.com/admin/cloudshell-execution-server-configurations/setting-up-execution-servers-to-run-commands"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2023.3"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2023.3"><meta data-rh="true" name="docsearch:version" content="2023.3"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2023.3"><meta data-rh="true" property="og:title" content="Setting Up Execution Servers to Run Commands | CloudShell Help"><meta data-rh="true" name="description" content="This article explains how to configure execution servers to run commands in CloudShell. Note that associating execution servers to automation suites is done on the job level, as explained in Add jobs to an automation suite."><meta data-rh="true" property="og:description" content="This article explains how to configure execution servers to run commands in CloudShell. Note that associating execution servers to automation suites is done on the job level, as explained in Add jobs to an automation suite."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://help.quali.com/admin/cloudshell-execution-server-configurations/setting-up-execution-servers-to-run-commands"><link data-rh="true" rel="alternate" href="https://help.quali.com/admin/cloudshell-execution-server-configurations/setting-up-execution-servers-to-run-commands" hreflang="en"><link data-rh="true" rel="alternate" href="https://help.quali.com/admin/cloudshell-execution-server-configurations/setting-up-execution-servers-to-run-commands" hreflang="x-default"><script src="https://cdn.cookielaw.org/consent/47d0fdb5-1ced-4a6a-a893-847e68cce066/OtAutoBlock.js"></script>
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="47d0fdb5-1ced-4a6a-a893-847e68cce066"></script>
<script src="http://help.quali.com/one-trust.js"></script><link rel="stylesheet" href="/assets/css/styles.cf98e9a9.css">
<script src="/assets/js/runtime~main.9c41b0b3.js" defer="defer"></script>
<script src="/assets/js/main.241ed936.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="CloudShell" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo-dark.svg" alt="CloudShell" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Online Help</b></a><a class="navbar__item navbar__link" href="/">2023.3</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/QualiSystems/cloudshell-help" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Welcome!</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/introduction">Introduction</a><button aria-label="Expand sidebar category &#x27;Introduction&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/cloudshell-quickstart-guides">CloudShell Quickstart Guides</a><button aria-label="Expand sidebar category &#x27;CloudShell Quickstart Guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/cloudshell-portal">CloudShell Portal</a><button aria-label="Expand sidebar category &#x27;CloudShell Portal&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/api-guide">CloudShell API Guide</a><button aria-label="Expand sidebar category &#x27;CloudShell API Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/install-configure">Installation and Configuration</a><button aria-label="Expand sidebar category &#x27;Installation and Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/jss">New Job Scheduling</a><button aria-label="Expand sidebar category &#x27;New Job Scheduling&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/category/cloudshell-administration">CloudShell Administration</a><button aria-label="Collapse sidebar category &#x27;CloudShell Administration&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/admin/administrative-operations-overview">Administrative Operations Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/category/setting-up-cloudshell">Setting Up CloudShell</a><button aria-label="Expand sidebar category &#x27;Setting Up CloudShell&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/admin/cloudshell-identity-management">CloudShell Identity Management</a><button aria-label="Expand sidebar category &#x27;CloudShell Identity Management&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/admin/cloudshell-manage-dashboard">CloudShell Manage Dashboard</a><button aria-label="Expand sidebar category &#x27;CloudShell Manage Dashboard&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/admin/cloudshell-execution-server-configurations">CloudShell Execution Server Configurations</a><button aria-label="Collapse sidebar category &#x27;CloudShell Execution Server Configurations&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/admin/cloudshell-execution-server-configurations/connecting-an-execution-server-to-quali-server">Connecting an Execution Server to Quali Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/admin/cloudshell-execution-server-configurations/setting-up-execution-servers-to-run-commands">Setting Up Execution Servers to Run Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/admin/cloudshell-execution-server-configurations/optimizing-execution-provisioning">Optimizing Execution Provisioning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/admin/cloudshell-execution-server-configurations/deleting-execution-servers">Deleting Execution Servers</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/admin/cloudshell-execution-server-configurations/setting-up-python-virtual-environments">Setting Up Python Virtual Environments</a><button aria-label="Expand sidebar category &#x27;Setting Up Python Virtual Environments&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/admin/supported-cloud-providers-in-cloudshell">Supported Cloud Providers in CloudShell</a><button aria-label="Expand sidebar category &#x27;Supported Cloud Providers in CloudShell&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/admin">CloudShell Administration</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/faq">Frequently Asked Questions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/troubleshooting">Troubleshooting</a><button aria-label="Expand sidebar category &#x27;Troubleshooting&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/devguide">The CloudShell DevGuide</a><button aria-label="Expand sidebar category &#x27;The CloudShell DevGuide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/release-notes">CloudShell 2023.3 Release Notes</a><button aria-label="Expand sidebar category &#x27;CloudShell 2023.3 Release Notes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/category/cloudshell-administration"><span itemprop="name">CloudShell Administration</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/admin/cloudshell-execution-server-configurations"><span itemprop="name">CloudShell Execution Server Configurations</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Setting Up Execution Servers to Run Commands</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Setting Up Execution Servers to Run Commands</h1>
<p>This article explains how to configure execution servers to run commands in CloudShell. Note that associating execution servers to automation suites is done on the job level, as explained in <a href="/portal/job-scheduling/manage-automation-suites/add-suites#add-jobs-to-an-automation-suite">Add jobs to an automation suite</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="managing-execution-servers">Managing execution servers<a href="#managing-execution-servers" class="hash-link" aria-label="Direct link to Managing execution servers" title="Direct link to Managing execution servers">​</a></h2>
<p>The <strong>Execution Servers</strong> management pages in the web portal allow you to both manage and troubleshoot your execution servers, providing critical, real time data about the status of your execution servers, command and job executions, and troubleshooting information and options. For additional information, see <a href="/admin/manage-dashboard/execution-servers">Managing Execution Servers</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="distributed-provisioning">Distributed provisioning<a href="#distributed-provisioning" class="hash-link" aria-label="Direct link to Distributed provisioning" title="Direct link to Distributed provisioning">​</a></h2>
<p>To allow for more flexibility and control, CloudShell uses execution servers to manage the executions of jobs and commands. Each CloudShell execution server has a job and command capacity, which can be modified as needed. CloudShell execution servers do not require a license, allowing for multiple execution servers to be used in CloudShell. For example, you can install several execution servers to distribute execution tasks and use execution servers that are physically closest to geographically distributed sites to minimize latency/avoid firewall issues.</p>
<p>Execution servers can be installed in Windows and Linux environments.</p>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>Blueprint orchestration can be configured to run on one execution server, while the blueprint&#x27;s orchestration can trigger resource commands that run on a completely different execution server. In this case, the orchestration will wait for the resource command(s) to finish. This kind of design decouples the resource level connectivity requirements from the orchestration.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optimizing-execution-capacity">Optimizing execution capacity<a href="#optimizing-execution-capacity" class="hash-link" aria-label="Direct link to Optimizing execution capacity" title="Direct link to Optimizing execution capacity">​</a></h3>
<p>For detailed information, see <a href="/admin/cloudshell-execution-server-configurations/optimizing-execution-provisioning">Optimizing Execution Provisioning</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="distributed-command-execution">Distributed command execution<a href="#distributed-command-execution" class="hash-link" aria-label="Direct link to Distributed command execution" title="Direct link to Distributed command execution">​</a></h3>
<p>Multiple execution servers can be deployed in order to scale out the provisioning and resource command tasks. By default, blueprint and resource commands are distributed between the execution servers according to their capacity. It is possible, however, to specify more explicit rules to control the execution server selection for commands, as explained in the &quot;execution server selection&quot; sections below. For additional information, see <a href="/admin/cloudshell-execution-server-configurations/optimizing-execution-provisioning">Optimizing Execution Provisioning</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="resource-commands">Resource commands<a href="#resource-commands" class="hash-link" aria-label="Direct link to Resource commands" title="Direct link to Resource commands">​</a></h3>
<p><em>In this section, the term resource denotes resource, service or App.</em></p>
<p>When a resource command is executed, the system first checks whether a driver for that resource is already active on one of the execution servers. If it is, the command is automatically sent to that driver to be queued and handled. In case no driver is currently active, the resource driver is started on an available execution server.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="controlling-execution-server-selection-for-resource-commands">Controlling execution server selection for resource commands<a href="#controlling-execution-server-selection-for-resource-commands" class="hash-link" aria-label="Direct link to Controlling execution server selection for resource commands" title="Direct link to Controlling execution server selection for resource commands">​</a></h2>
<p>Attributes can be used to match resource commands to the right execution server based on geographical location of the server and resource, execution server capabilities or other concerns. In a multi-site deployment, for example, there is an advantage in ensuring that overseas lab resources are only controlled by an on-premise execution server. This will help reduce the network latency and improve performance.</p>
<p>For additional information, see <a href="/portal/inventory/managing-resources/associate-resources-to-es">Associating Resources to Specific Execution Servers</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="controlling-execution-server-selection-for-app-deployments">Controlling execution server selection for App deployments<a href="#controlling-execution-server-selection-for-app-deployments" class="hash-link" aria-label="Direct link to Controlling execution server selection for App deployments" title="Direct link to Controlling execution server selection for App deployments">​</a></h2>
<p>To learn how to do this, see the appropriate article:</p>
<ul>
<li>For private cloud Apps, see <a href="/admin/supported-cloud-providers-in-cloudshell/private-cloud-provider-support-in-cloudshell/managing-private-cloud-apps-in-domains">Managing Private Cloud Apps in Domains</a>.</li>
<li>For public cloud Apps, see <a href="/admin/supported-cloud-providers-in-cloudshell/public-cloud-provider-support-in-cloudshell/managing-public-cloud-apps-in-domains">Managing Public Cloud Apps in Domains</a>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="controlling-execution-server-selection-for-blueprint-commands">Controlling execution server selection for blueprint commands<a href="#controlling-execution-server-selection-for-blueprint-commands" class="hash-link" aria-label="Direct link to Controlling execution server selection for blueprint commands" title="Direct link to Controlling execution server selection for blueprint commands">​</a></h2>
<p>Blueprint driver commands are also distributed between the execution servers based on availability and capacity. In order to restrict blueprint commands to a specific group of execution servers, a configuration key needs to be added specifying the relevant selector attribute value.</p>
<ol>
<li>
<p>Create a selector attribute and assign it to an execution server, as explained in <a href="/portal/inventory/managing-resources/associate-resources-to-es">Associating Resources to Specific Execution Servers</a>.</p>
</li>
<li>
<p>Specify an attribute value for blueprint commands. Add the following configuration key to the Quali server <code>customer.config</code> file: <code>EnvironmentCommandsESRestrictions</code></p>
</li>
</ol>
<p>The value should be the attribute name and value given the syntax <code>Name=Value</code>. For example:</p>
<p><img decoding="async" loading="lazy" src="/assets/images/Management_2_3_565x28-ffc8e2db5cafcf8ed13ed0c57c40c79c.png" width="565" height="28" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-execution-server-to-run-as-a-process-by-default">Configuring the Execution Server to Run as a Process by Default<a href="#configuring-the-execution-server-to-run-as-a-process-by-default" class="hash-link" aria-label="Direct link to Configuring the Execution Server to Run as a Process by Default" title="Direct link to Configuring the Execution Server to Run as a Process by Default">​</a></h2>
<p>See <a href="/install-configure/cloudshell-suite/configure-products/config-execution-server-process">Configure the Execution Server to Run as a Process by Default</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="working-with-local-tests">Working with local tests<a href="#working-with-local-tests" class="hash-link" aria-label="Direct link to Working with local tests" title="Direct link to Working with local tests">​</a></h2>
<p>If you are using a source control tool and wish to configure CloudShell to work with your local tests, see <a href="/admin/setting-up-cloudshell/source-control-using-local-tests-in-automation-suites">Source Control: Using Local Tests in Automation Suites</a> or contact Quali support or your Customer Success representative.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-execution-servers-to-deploy-vcenter-apps">Configuring Execution Servers to Deploy vCenter Apps<a href="#configuring-execution-servers-to-deploy-vcenter-apps" class="hash-link" aria-label="Direct link to Configuring Execution Servers to Deploy vCenter Apps" title="Direct link to Configuring Execution Servers to Deploy vCenter Apps">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="number-of-execution-slots-for-vm-deployments">Number of execution slots for VM deployments<a href="#number-of-execution-slots-for-vm-deployments" class="hash-link" aria-label="Direct link to Number of execution slots for VM deployments" title="Direct link to Number of execution slots for VM deployments">​</a></h3>
<p>Take the following considerations into account when setting the number of Execution Server command slots for the deployment of Apps.</p>
<table><thead><tr><th>App deployment</th><th>Number of command slots required</th></tr></thead><tbody><tr><td><strong>Apps deployed manually</strong></td><td>3 slots per App</td></tr><tr><td><strong>Apps deployed automatically by CloudShell setup</strong></td><td>2n + 1 (n = total number of Apps to be deployed at the same time)<br>For example, deploying 5 Apps requires at least 11 execution slots.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deployments-from-ovf-image-files">Deployments from OVF image files<a href="#deployments-from-ovf-image-files" class="hash-link" aria-label="Direct link to Deployments from OVF image files" title="Direct link to Deployments from OVF image files">​</a></h3>
<p>The following configurations should be performed on each execution server machine that will be used by the vCenter resource to deploy VMs from OVF image files during App deployments.</p>
<ul>
<li>
<p>Configure access to vCenter OVF image file path</p>
</li>
<li>
<p>Install the OVF tool</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-execution-servers-to-support-python-3-shells-and-scripts">Configuring Execution Servers to support Python 3 shells and scripts<a href="#configuring-execution-servers-to-support-python-3-shells-and-scripts" class="hash-link" aria-label="Direct link to Configuring Execution Servers to support Python 3 shells and scripts" title="Direct link to Configuring Execution Servers to support Python 3 shells and scripts">​</a></h2>
<p>Python 3 automation requires Microsoft Visual C++ Redistributable 2015 x86 and x64 to be installed on the Execution Server(s). Without this installation, CloudShell will not create the Python virtual environment for the shell or script&#x27;s execution on the Execution Server.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enabling-custom-execution-servers">Enabling custom execution servers<a href="#enabling-custom-execution-servers" class="hash-link" aria-label="Direct link to Enabling custom execution servers" title="Direct link to Enabling custom execution servers">​</a></h2>
<p>You can enable or disable the use of your own custom-built execution server. This feature is enabled by default.</p>
<p>To enable custom execution servers:</p>
<ol>
<li>
<p>Go to <code>C:\Program Files (x86)\QualiSystems\CloudShell\Portal\customer.config</code> file, and add the following key:</p>
<p><code>&lt;add key=&quot;EnableCustomServerTypes&quot; value=&quot;True&quot;/&gt;</code></p>
</li>
<li>
<p>Restart the <strong>CloudShell Portal IIS</strong> service.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-the-virtual-environment-validity-period">Setting the Virtual Environment validity period<a href="#setting-the-virtual-environment-validity-period" class="hash-link" aria-label="Direct link to Setting the Virtual Environment validity period" title="Direct link to Setting the Virtual Environment validity period">​</a></h2>
<p>CloudShell virtual environments (venv) are used to isolate Python driver and script executions on the Execution Server, and include all the dependencies required by the execution. Since dependencies may change, the Execution Server has the capability to reinstall/upgrade the venv dependencies on each subsequent execution of a script or driver that has a live venv. However, doing this is time-consuming, even if the requirements are already met.</p>
<p>It is therefore important to limit the number of times venvs are updated by the Execution Servers. This is done using the <code>VirtualEnvironmentLifetimeDurationInMinutes</code> configuration key, which sets the global validity period, in minutes, for venvs. During this timeframe, on subsequent executions of the venv&#x27;s driver or script, the Execution Server will not attempt to update the venv as long as the validity period has not expired.</p>
<p>The default value is 480 minutes.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Notes</div><div class="admonitionContent_BuS1"><ul>
<li>
<p>If the Execution Server restarts and there are existing virtual environments in place, the Execution Server will update the venv and reset the validity period.</p>
</li>
<li>
<p>This key applies to online and offline modes.</p>
</li>
<li>
<p>Venvs are used for resource drivers, resource scripts and orchestration scripts.</p>
</li>
<li>
<p>Since old venvs may still be in use, they are not deleted until the next CloudShell update or Execution Server restart.</p>
</li>
</ul></div></div>
<p><strong>To Setting the Virtual Environment validity period:</strong></p>
<ol>
<li>
<p>Open the <code>C:\Program Files (x86)\QualiSystems\CloudShell\Server\customer.config</code> file, and add the following key:</p>
<p><code>&lt;add key=&quot;VirtualEnvironmentLifetimeDurationInMinutes&quot; value=&quot;480&quot;/&gt;</code></p>
</li>
<li>
<p>Set the desired value.</p>
</li>
<li>
<p>Save the file.</p>
</li>
<li>
<p>Restart the <strong>Quali Server</strong> service.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-the-logging-level-for-python-drivers-and-scripts-running-on-an-execution-server">Setting the logging level for Python drivers and scripts running on an Execution Server<a href="#setting-the-logging-level-for-python-drivers-and-scripts-running-on-an-execution-server" class="hash-link" aria-label="Direct link to Setting the logging level for Python drivers and scripts running on an Execution Server" title="Direct link to Setting the logging level for Python drivers and scripts running on an Execution Server">​</a></h2>
<p>It is possible to set the logging level for automation processes running on a specific Execution Server or Python driver (for drivers, see CloudShell Dev Guide&#x27;s <a href="/devguide/developing-shells/tips-and-tricks-for-shells">Tips and Tricks for Shells</a> article). The logging levels are: DEBUG, INFO, WARN and ERROR.Only messages that are greater than the specified log level are saved to the logs.</p>
<p>Logs are organized in different files according to resource and sandbox. The folder location will be relative to the driver in the virtual environment location at: <code>%venv%\[drivername]\Lib\site-packages\cloudshell\Logs</code> (e.g. C:\ProgramData\QualiSystems\venv\Deployment_Orchestrator_5_2\Lib\site-packages\cloudshell\Logs). Under windows, <code>[venv]</code> will be located at <code>%programdata%\qualisystems\venv</code>.</p>
<p><strong>To set the logging level for Python drivers and scripts:</strong></p>
<ol>
<li>
<p>Go to <code>C:\Program Files (x86)\QualiSystems\TestShell\ExecutionServer\customer.config</code> file, and add the following key:</p>
<p><code>&lt;add key=&quot;DefaultPythonEnvrionmentVariables&quot; value=&quot;LOG_LEVEL=&lt;log-level&gt;&quot;/&gt;</code></p>
</li>
<li>
<p>Replace <code>&lt;log-level&gt;</code> with the desired level.</p>
<p>For example:</p>
<p><code>&lt;add key=&quot;DefaultPythonEnvrionmentVariables&quot; value=&quot;LOG_LEVEL=DEBUG&quot;/&gt;</code></p>
</li>
<li>
<p>Restart the <strong>TestShell Execution Server</strong> service.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-environment-variables-to-be-used-by-python-driver-instances">Setting environment variables to be used by Python driver instances<a href="#setting-environment-variables-to-be-used-by-python-driver-instances" class="hash-link" aria-label="Direct link to Setting environment variables to be used by Python driver instances" title="Direct link to Setting environment variables to be used by Python driver instances">​</a></h2>
<p>Using the <code>DefaultPythonEnvrionmentVariables</code> key, you can define environment variables to be used by the driver. The environment variable is defined on the Execution Server and will be used by the appropriate driver instances that are running on that Execution Server.</p>
<p><strong>To set environment variables for Python driver instances:</strong></p>
<ol>
<li>
<p>Go to <code>C:\Program Files (x86)\QualiSystems\TestShell\ExecutionServer\customer.config</code> file, and add the following key:</p>
<p><code>&lt;add key=&quot;DefaultPythonEnvrionmentVariables&quot; value=&quot;&lt;variable-pairs&gt;&quot;/&gt;</code></p>
</li>
<li>
<p>Replace each <code>&lt;variable-pairs&gt;</code> with a semicolon (;) separated list of the appropriate variable name-value pairs.</p>
<p>For example:</p>
<p><code>&lt;add key=&quot;DefaultPythonEnvrionmentVariables&quot; value=&quot;name1=value1;name2=value2,&quot;/&gt;</code></p>
</li>
<li>
<p>Restart the <strong>TestShell Execution Server</strong> service.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<ul>
<li>
<p><strong>What happens if the Execution Server is offline while I run the update process?</strong></p>
<p>The execution server will still change to a state of Waiting for update and once it gets back online, it will start the update process first, and only then it will get jobs to run.</p>
</li>
<li>
<p><strong>What happens if I (or someone else) start another update process before the previous one is done?</strong></p>
<p>You cannot start another process until the update on the QualiServer is done.</p>
<p>Once its done, and the system is updating or waiting to update the execution servers, you can start another update process and even provide different blueprint parameters.</p>
<p>Idle stations that were already updated by the previous process and stations that are currently updating will start the update again. Each station that is in a Waiting for update state will remain in that state and will execute the batch file with the new parameters when it becomes idle</p>
</li>
<li>
<p><strong>If the batch files fails, how can I check what happened?</strong></p>
<p>On each machine, you define the batch file to launch and a folder in which we save the outputs from these batch files. If your batch files outputs any information about the process, then you&#x27;ll be able to see it in these files and check what might have gone wrong. If the process stopped on TestShell Studio, you can check the logs of the portal for other relevant details. If it failed on the execution server, check the logs of it to see if there is more information.</p>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/QualiSystems/cloudshell-help/tree/main/versioned_docs/version-2023.3/admin/cloudshell-execution-server-configurations/setting-up-execution-servers-to-run-commands.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/admin/cloudshell-execution-server-configurations/connecting-an-execution-server-to-quali-server"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Connecting an Execution Server to Quali Server</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/admin/cloudshell-execution-server-configurations/optimizing-execution-provisioning"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Optimizing Execution Provisioning</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#managing-execution-servers" class="table-of-contents__link toc-highlight">Managing execution servers</a></li><li><a href="#distributed-provisioning" class="table-of-contents__link toc-highlight">Distributed provisioning</a><ul><li><a href="#optimizing-execution-capacity" class="table-of-contents__link toc-highlight">Optimizing execution capacity</a></li><li><a href="#distributed-command-execution" class="table-of-contents__link toc-highlight">Distributed command execution</a></li><li><a href="#resource-commands" class="table-of-contents__link toc-highlight">Resource commands</a></li></ul></li><li><a href="#controlling-execution-server-selection-for-resource-commands" class="table-of-contents__link toc-highlight">Controlling execution server selection for resource commands</a></li><li><a href="#controlling-execution-server-selection-for-app-deployments" class="table-of-contents__link toc-highlight">Controlling execution server selection for App deployments</a></li><li><a href="#controlling-execution-server-selection-for-blueprint-commands" class="table-of-contents__link toc-highlight">Controlling execution server selection for blueprint commands</a></li><li><a href="#configuring-the-execution-server-to-run-as-a-process-by-default" class="table-of-contents__link toc-highlight">Configuring the Execution Server to Run as a Process by Default</a></li><li><a href="#working-with-local-tests" class="table-of-contents__link toc-highlight">Working with local tests</a></li><li><a href="#configuring-execution-servers-to-deploy-vcenter-apps" class="table-of-contents__link toc-highlight">Configuring Execution Servers to Deploy vCenter Apps</a><ul><li><a href="#number-of-execution-slots-for-vm-deployments" class="table-of-contents__link toc-highlight">Number of execution slots for VM deployments</a></li><li><a href="#deployments-from-ovf-image-files" class="table-of-contents__link toc-highlight">Deployments from OVF image files</a></li></ul></li><li><a href="#configuring-execution-servers-to-support-python-3-shells-and-scripts" class="table-of-contents__link toc-highlight">Configuring Execution Servers to support Python 3 shells and scripts</a></li><li><a href="#enabling-custom-execution-servers" class="table-of-contents__link toc-highlight">Enabling custom execution servers</a></li><li><a href="#setting-the-virtual-environment-validity-period" class="table-of-contents__link toc-highlight">Setting the Virtual Environment validity period</a></li><li><a href="#setting-the-logging-level-for-python-drivers-and-scripts-running-on-an-execution-server" class="table-of-contents__link toc-highlight">Setting the logging level for Python drivers and scripts running on an Execution Server</a></li><li><a href="#setting-environment-variables-to-be-used-by-python-driver-instances" class="table-of-contents__link toc-highlight">Setting environment variables to be used by Python driver instances</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://quali.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Quali Website</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://community.quali.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CloudShell Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://quali.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Quali&#x27;s Blog</a></li><li class="footer__item"><a href="https://support.quali.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Quali Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Quali, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>